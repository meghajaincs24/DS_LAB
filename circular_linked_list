
  #include <stdio.h>
#include <stdlib.h>

// Define the node
struct Node {
    int data;
    struct Node* next;
};

// Global pointers - automatically initialized to NULL
struct Node* head = NULL;
struct Node* tail = NULL;

// Helper to create a node
struct Node* createNode(int val) {
    struct Node* newNode = (struct Node*)malloc(sizeof(struct Node));
    newNode->data = val;
    newNode->next = NULL;
    return newNode;
}

// 1. INSERT AT BEGINNING
void insertFront(int val) {
    struct Node* newNode = createNode(val);
    if (head == NULL) {
        head = tail = newNode;
        newNode->next = head;
    } else {
        newNode->next = head;
        head = newNode;
        tail->next = head; // Keep it circular
    }
}

// 2. INSERT AT END
void insertEnd(int val) {
    struct Node* newNode = createNode(val);
    if (head == NULL) {
        head = tail = newNode;
        newNode->next = head;
    } else {
        tail->next = newNode;
        tail = newNode;
        tail->next = head; // Keep it circular
    }
}

// 3. DELETE FROM BEGINNING
void deleteFront() {
    if (head == NULL) {
        printf("List is empty.\n");
        return;
    }

    struct Node* temp = head;
    if (head == tail) { // Only one node
        head = tail = NULL;
    } else {
        head = head->next;
        tail->next = head;
    }
    free(temp);
}

// 4. DELETE FROM END
void deleteEnd() {
    if (head == NULL) {
        printf("List is empty.\n");
        return;
    }

    struct Node* temp = head;
    if (head == tail) { // Only one node case
        head = tail = NULL;
        free(temp);
    } else {
        // Must find node before tail (prev)
        struct Node* prev = head;
        while (prev->next != tail) {
            prev = prev->next;
        }
        struct Node* toDelete = tail;
        tail = prev;
        tail->next = head;
        free(toDelete);
    }
}

void display() {
    if (head == NULL) {
        printf("List is empty.\n");
        return;
    }
    struct Node* temp = head;
    do {
        printf("%d -> ", temp->data);
        temp = temp->next;
    } while (temp != head);
    printf("(head)\n");
}

int main() {
    // No need to initialize or pass pointers!
    insertEnd(10);
    insertEnd(20);
    insertFront(5);
    
    printf("List after insertions: ");
    display();

    deleteFront();
    printf("After deleting front: ");
    display();

    deleteEnd();
    printf("After deleting end: ");
    display();

    return 0;
}
